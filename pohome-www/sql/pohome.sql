-- MySQL Script generated by MySQL Workbench
-- Tue Feb 10 11:32:44 2015
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema pohome
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `pohome` ;

-- -----------------------------------------------------
-- Schema pohome
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `pohome` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `pohome` ;

-- -----------------------------------------------------
-- Table `pohome`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`user` ;

CREATE TABLE IF NOT EXISTS `pohome`.`user` (
  `id` CHAR(36) NOT NULL,
  `username` VARCHAR(15) NOT NULL,
  `password` VARCHAR(60) NOT NULL,
  `email` VARCHAR(25) NOT NULL,
  `mobile` VARCHAR(11) NULL,
  `created_at` DATETIME NOT NULL,
  `last_visit_at` DATETIME NOT NULL,
  `last_visit_ip` INT UNSIGNED NOT NULL,
  `email_verified` TINYINT(1) NOT NULL DEFAULT 0,
  `mobile_verified` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `username_UNIQUE` (`username` ASC),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC),
  UNIQUE INDEX `mobile_UNIQUE` (`mobile` ASC),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`roles`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`roles` ;

CREATE TABLE IF NOT EXISTS `pohome`.`roles` (
  `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`permissions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`permissions` ;

CREATE TABLE IF NOT EXISTS `pohome`.`permissions` (
  `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`user_has_roles`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`user_has_roles` ;

CREATE TABLE IF NOT EXISTS `pohome`.`user_has_roles` (
  `user_id` CHAR(36) NOT NULL,
  `role_id` SMALLINT UNSIGNED NOT NULL,
  PRIMARY KEY (`role_id`),
  INDEX `fk_users_has_roles_roles1_idx` (`role_id` ASC),
  INDEX `fk_user_has_roles_user1_idx` (`user_id` ASC),
  CONSTRAINT `fk_users_has_roles_roles1`
    FOREIGN KEY (`role_id`)
    REFERENCES `pohome`.`roles` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_has_roles_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`role_has_permissions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`role_has_permissions` ;

CREATE TABLE IF NOT EXISTS `pohome`.`role_has_permissions` (
  `role_id` SMALLINT UNSIGNED NOT NULL,
  `permission_id` SMALLINT UNSIGNED NOT NULL,
  PRIMARY KEY (`role_id`, `permission_id`),
  INDEX `fk_roles_has_permissions_permissions1_idx` (`permission_id` ASC),
  INDEX `fk_roles_has_permissions_roles1_idx` (`role_id` ASC),
  CONSTRAINT `fk_roles_has_permissions_roles1`
    FOREIGN KEY (`role_id`)
    REFERENCES `pohome`.`roles` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_roles_has_permissions_permissions1`
    FOREIGN KEY (`permission_id`)
    REFERENCES `pohome`.`permissions` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`disctict`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`disctict` ;

CREATE TABLE IF NOT EXISTS `pohome`.`disctict` (
  `id` INT UNSIGNED NOT NULL,
  `name` VARCHAR(10) NOT NULL,
  `belong_to` INT UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `fk_belong_to_idx` (`belong_to` ASC),
  CONSTRAINT `fk_belong_to`
    FOREIGN KEY (`belong_to`)
    REFERENCES `pohome`.`disctict` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`pet_location`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`pet_location` ;

CREATE TABLE IF NOT EXISTS `pohome`.`pet_location` (
  `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(12) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`pet_status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`pet_status` ;

CREATE TABLE IF NOT EXISTS `pohome`.`pet_status` (
  `id` SMALLINT UNSIGNED NOT NULL,
  `name` VARCHAR(12) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`pet`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`pet` ;

CREATE TABLE IF NOT EXISTS `pohome`.`pet` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(10) NOT NULL,
  `avatar` CHAR(21) NOT NULL,
  `species` ENUM('D','C') NOT NULL,
  `gender` ENUM('M','F') NOT NULL,
  `breed` VARCHAR(10) NOT NULL,
  `birthday` DATE NOT NULL,
  `body_size` ENUM('L','M','S') NOT NULL,
  `character` VARCHAR(40) NOT NULL,
  `health` VARCHAR(40) NOT NULL,
  `notice` VARCHAR(400) NOT NULL,
  `entry_date` DATE NOT NULL,
  `neuter_date` DATE NOT NULL,
  `last_immune_date` DATE NOT NULL,
  `last_kill_insect_date` DATE NOT NULL,
  `last_bath_date` DATE NOT NULL,
  `angel_id` INT NOT NULL,
  `neutered` TINYINT(1) NOT NULL,
  `pet_location_id` SMALLINT UNSIGNED NOT NULL,
  `pet_status_id` SMALLINT UNSIGNED NOT NULL,
  `adoptable` TINYINT(1) NOT NULL,
  `draft` TINYINT(1) NOT NULL,
  `viewed` INT UNSIGNED NOT NULL,
  `favorite` INT UNSIGNED NOT NULL,
  `creator_id` CHAR(36) NOT NULL,
  `created_at` DATETIME NOT NULL COMMENT '	',
  `modified_at` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `pet_name_INDEX` (`name` ASC),
  INDEX `fk_pet_user1_idx` (`creator_id` ASC),
  INDEX `fk_pet_pet_location1_idx` (`pet_location_id` ASC),
  INDEX `fk_pet_pet_status1_idx` (`pet_status_id` ASC),
  CONSTRAINT `fk_pet_user`
    FOREIGN KEY (`creator_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pet_pet_location`
    FOREIGN KEY (`pet_location_id`)
    REFERENCES `pohome`.`pet_location` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pet_pet_status`
    FOREIGN KEY (`pet_status_id`)
    REFERENCES `pohome`.`pet_status` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`user_extra_info`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`user_extra_info` ;

CREATE TABLE IF NOT EXISTS `pohome`.`user_extra_info` (
  `user_id` CHAR(36) NOT NULL,
  `realname` VARCHAR(15) NULL,
  `id_num` CHAR(18) NULL,
  `birthday` DATE NULL,
  `gender` ENUM('M','F') NULL,
  `province_id` INT UNSIGNED NOT NULL,
  `city_id` INT UNSIGNED NOT NULL,
  `qq` VARCHAR(15) NULL,
  `weibo` VARCHAR(30) NULL,
  `taobao` VARCHAR(25) NULL,
  `referee_id` CHAR(36) NOT NULL,
  `has_car` TINYINT(1) NOT NULL DEFAULT 0,
  INDEX `fk_user_extra_info_user1_idx` (`user_id` ASC),
  PRIMARY KEY (`user_id`),
  INDEX `fk_user_extra_info_user2_idx` (`referee_id` ASC),
  INDEX `fk_user_extra_info_disctict1_idx` (`province_id` ASC),
  INDEX `fk_user_extra_info_disctict2_idx` (`city_id` ASC),
  CONSTRAINT `fk_user_extra_info_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_extra_info_user2`
    FOREIGN KEY (`referee_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_extra_info_disctict1`
    FOREIGN KEY (`province_id`)
    REFERENCES `pohome`.`disctict` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_extra_info_disctict2`
    FOREIGN KEY (`city_id`)
    REFERENCES `pohome`.`disctict` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`log`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`log` ;

CREATE TABLE IF NOT EXISTS `pohome`.`log` (
  `id` INT UNSIGNED NOT NULL,
  `user_id` CHAR(36) NOT NULL,
  `type` TINYINT UNSIGNED NOT NULL,
  `sub_type` TINYINT UNSIGNED NOT NULL,
  `content` TEXT NOT NULL,
  `datetime` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_log_user1_idx` (`user_id` ASC),
  CONSTRAINT `fk_log_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`contribution_intension`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`contribution_intension` ;

CREATE TABLE IF NOT EXISTS `pohome`.`contribution_intension` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `intension` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`service_record`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`service_record` ;

CREATE TABLE IF NOT EXISTS `pohome`.`service_record` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` CHAR(36) NOT NULL,
  `title` VARCHAR(45) NOT NULL,
  `date` DATE NOT NULL,
  `contribution_hour` TINYINT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_service_record_user1_idx` (`user_id` ASC),
  CONSTRAINT `fk_service_record_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`volunteer_contribution_intension`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`volunteer_contribution_intension` ;

CREATE TABLE IF NOT EXISTS `pohome`.`volunteer_contribution_intension` (
  `id` INT UNSIGNED NOT NULL,
  `user_id` CHAR(36) NOT NULL,
  `contribution_intension_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_volunteer_contribution_intension_user1_idx` (`user_id` ASC),
  INDEX `fk_volunteer_contribution_intension_contribution_intension1_idx` (`contribution_intension_id` ASC),
  CONSTRAINT `fk_volunteer_contribution_intension_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_volunteer_contribution_intension_contribution_intension1`
    FOREIGN KEY (`contribution_intension_id`)
    REFERENCES `pohome`.`contribution_intension` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`event_type`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`event_type` ;

CREATE TABLE IF NOT EXISTS `pohome`.`event_type` (
  `id` TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(10) NOT NULL,
  `template` TEXT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`event`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`event` ;

CREATE TABLE IF NOT EXISTS `pohome`.`event` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(20) NOT NULL,
  `begin` DATETIME NOT NULL,
  `end` DATETIME NOT NULL,
  `deadline` DATETIME NULL,
  `location` VARCHAR(20) NOT NULL,
  `content` TEXT NOT NULL,
  `member_limit` TINYINT UNSIGNED NOT NULL DEFAULT 0,
  `event_type_id` TINYINT UNSIGNED NOT NULL,
  `publisher_id` CHAR(36) NOT NULL,
  `created_at` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_event_event_type1_idx` (`event_type_id` ASC),
  INDEX `fk_event_user1_idx` (`publisher_id` ASC),
  CONSTRAINT `fk_event_event_type1`
    FOREIGN KEY (`event_type_id`)
    REFERENCES `pohome`.`event_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_user1`
    FOREIGN KEY (`publisher_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`catelog`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`catelog` ;

CREATE TABLE IF NOT EXISTS `pohome`.`catelog` (
  `id` TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`blog`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`blog` ;

CREATE TABLE IF NOT EXISTS `pohome`.`blog` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(20) NOT NULL,
  `content` TEXT NOT NULL,
  `abstract` VARCHAR(250) NOT NULL,
  `feature_image` CHAR(21) NOT NULL,
  `catelog_id` TINYINT UNSIGNED NOT NULL,
  `author_id` CHAR(36) NOT NULL,
  `draft` TINYINT(1) NOT NULL,
  `created_at` DATETIME NOT NULL,
  `published_at` DATETIME NOT NULL,
  `viewed` INT UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `fk_blog_catelog_idx` (`catelog_id` ASC),
  INDEX `fk_blog_user1_idx` (`author_id` ASC),
  CONSTRAINT `fk_blog_catelog`
    FOREIGN KEY (`catelog_id`)
    REFERENCES `pohome`.`catelog` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_blog_user`
    FOREIGN KEY (`author_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`event_application`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`event_application` ;

CREATE TABLE IF NOT EXISTS `pohome`.`event_application` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `event_id` INT UNSIGNED NOT NULL,
  `applicant_id` CHAR(36) NOT NULL,
  `number_of_people` TINYINT UNSIGNED NOT NULL DEFAULT 1,
  `location` VARCHAR(20) NOT NULL,
  `has_car` TINYINT(1) NOT NULL,
  `addition_remark` VARCHAR(100) NOT NULL,
  `applied_at` DATETIME NOT NULL,
  `contacted` TINYINT(1) NOT NULL DEFAULT 0,
  `approved` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `fk_event_application_event1_idx` (`event_id` ASC),
  INDEX `fk_event_application_user1_idx` (`applicant_id` ASC),
  CONSTRAINT `fk_event_application_event1`
    FOREIGN KEY (`event_id`)
    REFERENCES `pohome`.`event` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_application_user1`
    FOREIGN KEY (`applicant_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`adoption_application`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`adoption_application` ;

CREATE TABLE IF NOT EXISTS `pohome`.`adoption_application` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `pet_id` INT UNSIGNED NOT NULL,
  `applicant_id` CHAR(36) NOT NULL,
  `application_form` TEXT NOT NULL,
  `applied_at` DATETIME NOT NULL,
  `status` ENUM('S','R','EC','PC','V','A','D') NOT NULL,
  `closed` TINYINT(1) NOT NULL DEFAULT 0,
  `closed_at` DATETIME NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_adoption_application_pet1_idx` (`pet_id` ASC),
  INDEX `fk_adoption_application_user1_idx` (`applicant_id` ASC),
  CONSTRAINT `fk_adoption_application_pet1`
    FOREIGN KEY (`pet_id`)
    REFERENCES `pohome`.`pet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_adoption_application_user1`
    FOREIGN KEY (`applicant_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`contact_record`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`contact_record` ;

CREATE TABLE IF NOT EXISTS `pohome`.`contact_record` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `adoption_application_id` INT UNSIGNED NOT NULL,
  `contact_person_id` CHAR(36) NOT NULL,
  `type` ENUM('P','E','R') NOT NULL,
  `opinion` VARCHAR(400) NOT NULL,
  `datetime` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_contact_record_user1_idx` (`contact_person_id` ASC),
  INDEX `fk_contact_record_adoption_application1_idx` (`adoption_application_id` ASC),
  CONSTRAINT `fk_contact_record_user1`
    FOREIGN KEY (`contact_person_id`)
    REFERENCES `pohome`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_record_adoption_application1`
    FOREIGN KEY (`adoption_application_id`)
    REFERENCES `pohome`.`adoption_application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`pet_log`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`pet_log` ;

CREATE TABLE IF NOT EXISTS `pohome`.`pet_log` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `pet_id` INT UNSIGNED NOT NULL,
  `log_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pet_log_pet1_idx` (`pet_id` ASC),
  INDEX `fk_pet_log_log1_idx` (`log_id` ASC),
  CONSTRAINT `fk_pet_log_pet1`
    FOREIGN KEY (`pet_id`)
    REFERENCES `pohome`.`pet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pet_log_log1`
    FOREIGN KEY (`log_id`)
    REFERENCES `pohome`.`log` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`pet_photo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`pet_photo` ;

CREATE TABLE IF NOT EXISTS `pohome`.`pet_photo` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `pet_id` INT UNSIGNED NOT NULL,
  `filename` CHAR(21) NOT NULL,
  `priority` TINYINT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pet_photo_pet1_idx` (`pet_id` ASC),
  CONSTRAINT `fk_pet_photo_pet`
    FOREIGN KEY (`pet_id`)
    REFERENCES `pohome`.`pet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`pet_story`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`pet_story` ;

CREATE TABLE IF NOT EXISTS `pohome`.`pet_story` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `pet_id` INT UNSIGNED NOT NULL,
  `blog_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pet_story_pet1_idx` (`pet_id` ASC),
  INDEX `fk_pet_story_blog1_idx` (`blog_id` ASC),
  CONSTRAINT `fk_pet_story_pet`
    FOREIGN KEY (`pet_id`)
    REFERENCES `pohome`.`pet` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pet_story_blog`
    FOREIGN KEY (`blog_id`)
    REFERENCES `pohome`.`blog` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`tag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`tag` ;

CREATE TABLE IF NOT EXISTS `pohome`.`tag` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pohome`.`blog_with_tag`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pohome`.`blog_with_tag` ;

CREATE TABLE IF NOT EXISTS `pohome`.`blog_with_tag` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `blog_id` INT UNSIGNED NOT NULL,
  `tag_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_tag_id_idx` (`tag_id` ASC),
  CONSTRAINT `fk_blog_id`
    FOREIGN KEY (`blog_id`)
    REFERENCES `pohome`.`blog` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tag_id`
    FOREIGN KEY (`tag_id`)
    REFERENCES `pohome`.`tag` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `pohome`.`roles`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (0, '系统管理员');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (1, '动物管理员');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (2, '领养审核员');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (3, '活动管理员');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (4, '博文编辑');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (5, '注册用户');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (6, '已登记志愿者');
INSERT INTO `pohome`.`roles` (`id`, `name`) VALUES (7, '领养申请人');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`permissions`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (0, '登录后台');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '添加动物信息');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '编辑动物信息');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '添加动物照片');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '添加动物故事');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '变更动物状态');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '变更动物位置');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '撰写新博文');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '编辑自己撰写的博文');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '编辑他人撰写的博文');
INSERT INTO `pohome`.`permissions` (`id`, `name`) VALUES (, '发布新活动信息');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`pet_location`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '良乡基地');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '模拟家庭');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '宠福鑫动物医院立水桥店');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '万康动物医院良乡店');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '杨雪家');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '琪琪宠屋');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '小十三里商业寄养');
INSERT INTO `pohome`.`pet_location` (`id`, `name`) VALUES (NULL, '领养家庭');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`pet_status`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '等待领养');
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '住院治疗');
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '康复中');
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '行为训练中');
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '已领养');
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '走失');
INSERT INTO `pohome`.`pet_status` (`id`, `name`) VALUES (NULL, '死亡');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`contribution_intension`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '良乡基地义工服务');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '模拟家庭义工服务');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '印刷品平面设计');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '网站设计');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '摄影');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '摄像');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '文案编辑');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '产品设计');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '临时寄养');
INSERT INTO `pohome`.`contribution_intension` (`id`, `intension`) VALUES (NULL, '建筑规划');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`event_type`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`event_type` (`id`, `name`, `template`) VALUES (NULL, '良乡基地义工劳动', NULL);
INSERT INTO `pohome`.`event_type` (`id`, `name`, `template`) VALUES (NULL, '模拟家庭开放日', NULL);
INSERT INTO `pohome`.`event_type` (`id`, `name`, `template`) VALUES (NULL, '义卖活动', NULL);
INSERT INTO `pohome`.`event_type` (`id`, `name`, `template`) VALUES (NULL, '义演活动', NULL);
INSERT INTO `pohome`.`event_type` (`id`, `name`, `template`) VALUES (NULL, '领养活动', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`catelog`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '未分类');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '救助故事');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '领养故事');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '志愿者服务');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '知识库');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '曹菡艾教授专栏');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '捐助信息公布');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '转载');
INSERT INTO `pohome`.`catelog` (`id`, `name`) VALUES (NULL, '大事记');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pohome`.`tag`
-- -----------------------------------------------------
START TRANSACTION;
USE `pohome`;
INSERT INTO `pohome`.`tag` (`id`, `name`) VALUES (NULL, '良乡基地');
INSERT INTO `pohome`.`tag` (`id`, `name`) VALUES (NULL, '模拟家庭');
INSERT INTO `pohome`.`tag` (`id`, `name`) VALUES (NULL, '小天使基金');
INSERT INTO `pohome`.`tag` (`id`, `name`) VALUES (NULL, '瀛家军');
INSERT INTO `pohome`.`tag` (`id`, `name`) VALUES (NULL, '行为训练');

COMMIT;

